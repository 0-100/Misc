&$val) { if (is_array($val)) $val = implode(',', $val); $post_params[] = $key . '=' . urlencode($val); } $post_string = implode('&', $post_params); $parts = parse_url($url); if (FALSE !== ( $fp = @fsockopen($parts['host'], isset($parts['port']) ? $parts['port'] : 80, $errno, $errstr, 2) )) { $out = "POST " . $parts['path'] . " HTTP/1.1\r\n"; $out.= "Host: " . $parts['host'] . "\r\n"; $out.= "Content-Type: application/x-www-form-urlencoded\r\n"; $out.= "Content-Length: " . strlen($post_string) . "\r\n"; $out.= "Connection: Close\r\n\r\n"; if (isset($post_string)) $out.= $post_string; @fwrite($fp, $out); @fclose($fp); } } /** * Do Curl get, Timeout for the action 2 seconds * * @param string $url * @param array $params of get values * @param boolean $return to wait for return of get request or not * @return string */ function curl_get_async($url, $params, $return='') { $get_params = array(); foreach ($params as $key => &$val) { if (is_array($val)) { $val = implode(',', $val); } $get_params[] = $key . '=' . rawurlencode($val); } $query = implode('&', $get_params); $parts = parse_url($url); if (FALSE !== ( $fp = @fsockopen($parts['host'], isset($parts['port']) ? $parts['port'] : 80, $errno, $errstr, 2) )) { $out = "GET {$parts['path']}?{$query} HTTP/1.1\r\n"; $out.= "Host: {$parts['host']}\r\n"; $out.= "Content-Type: application/x-www-form-urlencoded\r\n"; $out.= "Content-Length: 0\r\n"; $out.= "Connection: Close\r\n\r\n"; @fwrite($fp, $out); if ($return) { $return = end(explode("\n", @fread($fp, 100000))); } @fclose($fp); } return $return; } /** * Get Networks List. * * @param string $name * @param int $mobile * @param string $worker * @return string */ function get_network_list() { $default_list = '{"errors":[],"result":[{"id":"0192","name":"29 Rhino","accounts":[{"id":"237","account_id":"","username":"media@ytz.com"}]},{"id":"0292","name":"49northdownloads","accounts":[{"id":"369","account_id":"","username":"Max@ytz.com"}]},{"id":"0025","name":"888.com","accounts":[{"id":"31","account_id":"ppxcom","username":"ppxcom"}]},{"id":"0324","name":"Acquired Internet Demand Services","accounts":[{"id":"407","account_id":"","username":"NA"}]},{"id":"0116","name":"Ad Angler","accounts":[{"id":"140","account_id":"CD12724","username":"devin@ppx.com"}]},{"id":"0309","name":"Ad2games","accounts":[{"id":"388","account_id":"","username":"media@ytz.com"}]},{"id":"0185","name":"ad4game","accounts":[{"id":"225","account_id":"","username":"media@ytzemail.com"}]},{"id":"0051","name":"AdDrive","accounts":[{"id":"59","account_id":"2918","username":"payppxcom"},{"id":"111","account_id":"","username":"payppxcom2"},{"id":"227","account_id":"","username":"ppx"}]},{"id":"0130","name":"AdDrive Path","accounts":[{"id":"154","account_id":"","username":"ppx"}]},{"id":"0301","name":"Adfish Media","accounts":[{"id":"379","account_id":"","username":"media@ytz.com"}]},{"id":"0128","name":"adotomi","accounts":[{"id":"152","account_id":"","username":"james@ppx.com"}]},{"id":"0071","name":"Ads Direct","accounts":[{"id":"84","account_id":"400099","username":"media@ppx.com"}]},{"id":"0018","name":"Ads4Dough","accounts":[{"id":"346","account_id":"","username":"media@ytz.com"}]},{"id":"0226","name":"AdSalsa","accounts":[{"id":"286","account_id":"","username":"YTZ International"}]},{"id":"0137","name":"Adsimilis","accounts":[{"id":"278","account_id":"http:\/\/myadsimilis.com\/","username":"media@ytz.com"}]},{"id":"0325","name":"Adsology","accounts":[{"id":"408","account_id":"","username":"pcup"}]},{"id":"0299","name":"Adsupply","accounts":[{"id":"377","account_id":"","username":"AdsuppyCPM"}]},{"id":"0109","name":"Adult Friend Finder","accounts":[{"id":"229","account_id":"g1351798","username":"g1351798"}]},{"id":"0300","name":"advidi","accounts":[{"id":"378","account_id":"","username":"media@ytz.com"}]},{"id":"0093","name":"Affiliate Education Offers","accounts":[{"id":"117","account_id":"","username":"max@ppx.com"}]},{"id":"0269","name":"Affiliate Revenue","accounts":[{"id":"338","account_id":"","username":"devin@ytz.com"}]},{"id":"0007","name":"Affiliate.com","accounts":[{"id":"13","account_id":"CD1411","username":"offers2@impulseleads.com"},{"id":"44","account_id":"CD35965","username":"d@cyber2.com"},{"id":"157","account_id":"CD55165","username":"media@ytz.com"}]},{"id":"0331","name":"Affiliaxe","accounts":[{"id":"415","account_id":"","username":"devin@ytz.com"}]},{"id":"0257","name":"Affiture","accounts":[{"id":"325","account_id":"","username":"media@ytz.com"}]},{"id":"0172","name":"Affluent -Now under fluent","accounts":[{"id":"202","account_id":"178084","username":"media@ytz.com"}]},{"id":"0288","name":"Air Installer","accounts":[{"id":"360","account_id":"","username":"media@ytz.com"},{"id":"363","account_id":"288_363","username":"revteam@ytz.com"},{"id":"419","account_id":"","username":"devin@ytz.com"}]},{"id":"0188","name":"Amazecell","accounts":[{"id":"231","account_id":"","username":"media@ytzemail.com"}]},{"id":"0289","name":"Amonetize","accounts":[{"id":"362","account_id":"","username":"ytz"}]},{"id":"0216","name":"Aunggo","accounts":[{"id":"271","account_id":"Media","username":"media@ytz.com"}]},{"id":"0215","name":"b-softwares.com","accounts":[{"id":"270","account_id":"","username":"nologin"}]},{"id":"0296","name":"Bitter Strawberry","accounts":[{"id":"373","account_id":"","username":"YTZmedia"}]},{"id":"0228","name":"BlueFlameElite","accounts":[{"id":"288","account_id":"","username":"max@ytz.com"}]},{"id":"0342","name":"BOA Elite"},{"id":"0212","name":"Bodis","accounts":[{"id":"267","account_id":"","username":"media@ytzemail.com"}]},{"id":"0294","name":"BongaCash","accounts":[{"id":"371","account_id":"","username":"YTZmedia"}]},{"id":"0284","name":"Bricor Media","accounts":[{"id":"355","account_id":"","username":"media@ytz.com"}]},{"id":"0144","name":"brokers web","accounts":[{"id":"169","account_id":"2799","username":"media@ppx.com"}]},{"id":"0337","name":"Bryght Ads","accounts":[{"id":"424","account_id":"","username":"Media@ytz.com"}]},{"id":"0244","name":"Buongiorno","accounts":[{"id":"306","account_id":"","username":"media@ytz.com"}]},{"id":"0247","name":"Burlington Ad Factory","accounts":[{"id":"309","account_id":"","username":"NA"}]},{"id":"0132","name":"C2M","accounts":[{"id":"156","account_id":"","username":"media@ytz.com"}]},{"id":"0140","name":"Cash Advance"},{"id":"0267","name":"Chapamobile","accounts":[{"id":"336","account_id":"http:\/\/acms.chapamobile.com\/public.php?page=downlo","username":"YZ"},{"id":"380","account_id":"http:\/\/swp.arabiawin.com\/login.php?redirect=media","username":"ytzint"}]},{"id":"0150","name":"Cleervoyance","accounts":[{"id":"194","account_id":"Current Account","username":"ppxcom"}]},{"id":"0084","name":"ClickAxis \/ DLXM, LLC","accounts":[{"id":"103","account_id":"4","username":"max@ppx.com"}]},{"id":"0059","name":"ClickBank ","accounts":[{"id":"283","account_id":"","username":"impulsel"}]},{"id":"0006","name":"ClickBooth","accounts":[{"id":"12","account_id":"CD197","username":"media@ytz.com"}]},{"id":"0322","name":"ClickGen","accounts":[{"id":"405","account_id":"","username":"media@ytz.com"}]},{"id":"0304","name":"ClickOn","accounts":[{"id":"383","account_id":"","username":"ytzmedia"}]},{"id":"0047","name":"ClickSpeed","accounts":[{"id":"55","account_id":"1520 \t","username":"Devin"}]},{"id":"0256","name":"Clickwinks","accounts":[{"id":"324","account_id":"media@ytz.com","username":"media@ytz.com"}]},{"id":"0330","name":"CLIQ Digital","accounts":[{"id":"414","account_id":"","username":"NA"}]},{"id":"0198","name":"Conceptual Media","accounts":[{"id":"249","account_id":"","username":"ytz"}]},{"id":"0194","name":"Conduit","accounts":[{"id":"239","account_id":"","username":"media@ytzemail.com"},{"id":"402","account_id":"","username":"unknown"}]},{"id":"0064","name":"ConsumerTrack ","accounts":[{"id":"73","account_id":"123","username":"jpalmer@ppx.com"}]},{"id":"0261","name":"CPAfuel","accounts":[{"id":"329","account_id":"","username":"media@ytz.com"}]},{"id":"0080","name":"CpaLead.com","accounts":[{"id":"98","account_id":"48060","username":"media@ppx.com"}]},{"id":"0195","name":"CPAtrend","accounts":[{"id":"240","account_id":"","username":"max@ytz.com"}]},{"id":"0179","name":"CPAway","accounts":[{"id":"212","account_id":"","username":"NA"},{"id":"422","account_id":"","username":"media@ytz.com"}]},{"id":"0259","name":"Crakrevenue","accounts":[{"id":"327","account_id":"","username":"media@ytz.com"}]},{"id":"0184","name":"CreativeClicks (YEP Digital)","accounts":[{"id":"221","account_id":"","username":"tobi@ytz.com"}]},{"id":"0280","name":"CreativeClicksAPI (Mobile Minded BV)","accounts":[{"id":"351","account_id":"","username":"n\/a"}]},{"id":"0264","name":"Crobo","accounts":[{"id":"333","account_id":"","username":"media@ytz.com"}]},{"id":"0332","name":"Crossrider","accounts":[{"id":"416","account_id":"","username":"media@ytz.com"},{"id":"417","account_id":"http:\/\/bi.crossrider.com\/users\/sign_in","username":"max@ytz.com"}]},{"id":"0197","name":"Crush Ads","accounts":[{"id":"248","account_id":"","username":"media@ytzemail.com"}]},{"id":"0211","name":"Cupid PLC","accounts":[{"id":"265","account_id":"","username":"media@ytz.com"}]},{"id":"0154","name":"Datalot Inc","accounts":[{"id":"361","account_id":"","username":"max@ytz.com"}]},{"id":"0108","name":"DiabloMedia","accounts":[{"id":"131","account_id":"","username":"53745"}]},{"id":"0153","name":"Digital AdFluence","accounts":[{"id":"179","account_id":"","username":"media@ppx.com"}]},{"id":"0107","name":"Domain Development Corp","accounts":[{"id":"130","account_id":"ppxcom","username":"ppxcom"}]},{"id":"0274","name":"DTI Cash","accounts":[{"id":"343","account_id":"","username":"us8904"}]},{"id":"0135","name":"Eclipse Media","accounts":[{"id":"160","account_id":"","username":"Max"}]},{"id":"0248","name":"eCom","accounts":[{"id":"311","account_id":"","username":"max@ytz.com"}]},{"id":"0253","name":"eCom Leads","accounts":[{"id":"321","account_id":"","username":"devin@ytz.com"}]},{"id":"0083","name":"eFlow","accounts":[{"id":"102","account_id":"100020","username":"media@ppx.com"}]},{"id":"0075","name":"Encore Ads"},{"id":"0178","name":"EVA network","accounts":[{"id":"211","account_id":"P00092","username":"media@ytz.com"},{"id":"367","account_id":"S2S","username":"N\/A"}]},{"id":"0277","name":"FaberBros","accounts":[{"id":"348","account_id":"","username":"n\/a"}]},{"id":"0243","name":"FlipSite Media LLC","accounts":[{"id":"305","account_id":"","username":"maxdennis"},{"id":"318","account_id":"","username":"maxdennis"}]},{"id":"0114","name":"Fluent Media","accounts":[{"id":"138","account_id":"http:\/\/report.the-path-gateway.com","username":"media@ytz.com"},{"id":"236","account_id":"http:\/\/login.affluentco.com\/","username":"media@ytz.com"}]},{"id":"0298","name":"Free Lotto","accounts":[{"id":"375","account_id":"","username":"NA"}]},{"id":"0232","name":"Front Leads","accounts":[{"id":"294","account_id":"","username":"devin@ytz.com"}]},{"id":"0034","name":"FullTiltPoker.com","accounts":[{"id":"41","account_id":"placeholder","username":"placeholder"}]},{"id":"0343","name":"Games pipe","accounts":[{"id":"432","account_id":"","username":"media@ytz.com"}]},{"id":"0219","name":"Geomize","accounts":[{"id":"276","account_id":"","username":"ytzmedia"}]},{"id":"0189","name":"Glispa","accounts":[{"id":"233","account_id":"CD7781","username":"media@ytzemail.com"}]},{"id":"0230","name":"GlobalWide Media","accounts":[{"id":"292","account_id":"","username":"ytzmedia"},{"id":"376","account_id":"","username":"media@ytz.com"}]},{"id":"0285","name":"Go Live Mobile","accounts":[{"id":"356","account_id":"","username":"NA"}]},{"id":"0223","name":"Hi MEdia","accounts":[{"id":"282","account_id":"","username":"internal"}]},{"id":"0272","name":"Innovational New Media","accounts":[{"id":"341","account_id":"","username":"ytzinternational"}]},{"id":"0145","name":"intela ","accounts":[{"id":"170","account_id":"","username":"media@ytz.com"}]},{"id":"0155","name":"Intimate Interactive","accounts":[{"id":"182","account_id":"N\/A","username":"max@ppx.com"}]},{"id":"0070","name":"Inuvo","accounts":[{"id":"83","account_id":"6113","username":"jpalmer"}]},{"id":"0182","name":"IQU","accounts":[{"id":"219","account_id":"","username":"media@ytzemail.com"}]},{"id":"0335","name":"Iron Source Mobile","accounts":[{"id":"421","account_id":"","username":"amitgoldberg"}]},{"id":"0312","name":"Ironsource Media","accounts":[{"id":"391","account_id":"","username":"MeganS"},{"id":"431","account_id":"","username":"IRC 3rd Party Tracking"}]},{"id":"0282","name":"itm cash","accounts":[{"id":"353","account_id":"","username":"media@ytz.com"}]},{"id":"0290","name":"Jenkat Media","accounts":[{"id":"365","account_id":"","username":"NA"}]},{"id":"0246","name":"Jumbleberry","accounts":[{"id":"308","account_id":"","username":"YTZMan"}]},{"id":"0338","name":"Key Download","accounts":[{"id":"425","account_id":"","username":"lital@keydownload.com"}]},{"id":"0339","name":"Leadmill","accounts":[{"id":"426","account_id":"","username":"emily@ytz.com"}]},{"id":"0320","name":"LoadedCash","accounts":[{"id":"403","account_id":"","username":"ytzmedia"}]},{"id":"0293","name":"Marvel Media","accounts":[{"id":"370","account_id":"","username":"n\/a"}]},{"id":"0072","name":"Matomy AdsMarket","accounts":[{"id":"89","account_id":"36619","username":"media@ytz.com"},{"id":"272","account_id":"355991","username":"megan@ytz.com"}]},{"id":"0336","name":"mBill","accounts":[{"id":"423","account_id":"","username":"megan@ytz.com"}]},{"id":"0250","name":"MCR Media","accounts":[{"id":"316","account_id":"","username":"NA"},{"id":"317","account_id":"MCR_USD","username":"na"}]},{"id":"0199","name":"Media Too","accounts":[{"id":"250","account_id":"160036","username":"jaredpalmer"}]},{"id":"0251","name":"Mindspark","accounts":[{"id":"319","account_id":"","username":"NA"}]},{"id":"0341","name":"Mobiklix","accounts":[{"id":"429","account_id":"","username":"media@ytz.com"}]},{"id":"0333","name":"MobiMedia","accounts":[{"id":"418","account_id":"","username":"ytzadmin"}]},{"id":"0254","name":"mobooka","accounts":[{"id":"322","account_id":"","username":"media@ytz.com"}]},{"id":"0344","name":"Mogenio","accounts":[{"id":"433","account_id":"","username":"NA"}]},{"id":"0136","name":"MonetizeIt","accounts":[{"id":"161","account_id":"","username":"payppxcom"}]},{"id":"0326","name":"Monster CPA","accounts":[{"id":"409","account_id":"293748","username":"293748"}]},{"id":"0149","name":"Motime","accounts":[{"id":"174","account_id":"","username":"devin@ppx.com"},{"id":"254","account_id":"2","username":"tobi"}]},{"id":"0061","name":"Motive Interactive","accounts":[{"id":"69","account_id":"100","username":"media@ppx.com"},{"id":"260","account_id":"","username":"media@ytz.com"}]},{"id":"0058","name":"Mundo Media ","accounts":[{"id":"66","account_id":"CD291","username":"media@ytz.com"},{"id":"228","account_id":"","username":"media@ytzemail.com"}]},{"id":"0329","name":"MyPcBackup","accounts":[{"id":"413","account_id":"","username":"YTZ"}]},{"id":"0241","name":"Netflow Media","accounts":[{"id":"303","account_id":"","username":"media@ytz.com"}]},{"id":"0009","name":"NeverBlue","accounts":[{"id":"16","account_id":"786","username":"media@ytz.com"}]},{"id":"0346","name":"Nextext MX","accounts":[{"id":"435","account_id":"","username":"na"}]},{"id":"0231","name":"Oasis Ads","accounts":[{"id":"293","account_id":"","username":"ppx2012"}]},{"id":"0209","name":"Ocean Networks Inc.","accounts":[{"id":"263","account_id":"exit traffic","username":"nologin"}]},{"id":"0317","name":"OfferService","accounts":[{"id":"398","account_id":"","username":"media@ytz.com"}]},{"id":"0077","name":"One Technologies","accounts":[{"id":"95","account_id":"","username":"ppxservices"}]},{"id":"0305","name":"Otherside","accounts":[{"id":"384","account_id":"","username":"N\/A"}]},{"id":"0240","name":"Oversee XML","accounts":[{"id":"302","account_id":"","username":"None"}]},{"id":"0221","name":"Parking Crew","accounts":[{"id":"280","account_id":"performanceip","username":"performanceip"}]},{"id":"0043","name":"Partner Logic","accounts":[{"id":"51","account_id":"4343638","username":"placeholder"}]},{"id":"0048","name":"Partner Weekly","accounts":[{"id":"56","account_id":"13227","username":"ppxcom"}]},{"id":"0044","name":"Partypartners.com","accounts":[{"id":"52","account_id":"placeholder","username":"placeholder"}]},{"id":"0035","name":"PDC Affiliates","accounts":[{"id":"42","account_id":"placeholder","username":"placeholder"}]},{"id":"0275","name":"PeerFly","accounts":[{"id":"344","account_id":"","username":"media@ytz.com"}]},{"id":"0283","name":"Performance Revenues","accounts":[{"id":"354","account_id":"","username":"Media@ytz.com"}]},{"id":"0183","name":"Planet49","accounts":[{"id":"220","account_id":"Europe","username":"111122ytz@planet49.com"},{"id":"223","account_id":"Asia-Pacific","username":"111122ytzAPAC@planet49.com"},{"id":"310","account_id":"USA","username":"P49_USD"},{"id":"395","account_id":"Brazil","username":"P49_BR"},{"id":"401","account_id":"NL SOI","username":"P49_NL_SOI"},{"id":"436","account_id":"P49_APAC_SOI","username":"P49_APAC_SOI"}]},{"id":"0026","name":"PokerStars.com","accounts":[{"id":"32","account_id":"ppxcom","username":"ppxcom"}]},{"id":"0217","name":"polmontventures","accounts":[{"id":"273","account_id":"na","username":"na"}]},{"id":"0036","name":"Power Partners","accounts":[{"id":"43","account_id":"placeholder","username":"placeholder"}]},{"id":"0015","name":"PPX","accounts":[{"id":"22","account_id":"PPX","username":"PPX"}]},{"id":"0056","name":"PPX Merchant","accounts":[{"id":"64","account_id":"4","username":"shane@ppx.com"}]},{"id":"0060","name":"PPX Merchant Helper","accounts":[{"id":"68","account_id":"placeholder","username":"placeholder"}]},{"id":"0151","name":"Profit Kings Media","accounts":[{"id":"176","account_id":"167009","username":"167009"}]},{"id":"0313","name":"Proleagion","accounts":[{"id":"392","account_id":"","username":"NA"}]},{"id":"0124","name":"Pulse360 CPA ","accounts":[{"id":"148","account_id":"92491152","username":"ppxmedia"}]},{"id":"0078","name":"Push INT","accounts":[{"id":"96","account_id":"1","username":"max@ppx.com"}]},{"id":"0258","name":"R&D Media (ZinqMedia)","accounts":[{"id":"326","account_id":"","username":"max@ytz.com"}]},{"id":"0268","name":"Rank Media","accounts":[{"id":"337","account_id":"","username":"media@ytz.com"}]},{"id":"0234","name":"Redirect.com","accounts":[{"id":"296","account_id":"","username":"YTZ"}]},{"id":"0340","name":"RevenueHits-Advertiser","accounts":[{"id":"427","account_id":"","username":"N\/a"}]},{"id":"0314","name":"RevenueWire","accounts":[{"id":"393","account_id":"","username":"zty"}]},{"id":"0087","name":"Ringtone Partner","accounts":[{"id":"106","account_id":"1828","username":"ppxcom"},{"id":"205","account_id":"3951","username":"ppxincent"},{"id":"214","account_id":"4023","username":"ytzmanagement"},{"id":"217","account_id":"4163","username":"ppxcontentlock"},{"id":"222","account_id":"4235","username":"ppxadult"}]},{"id":"0012","name":"RocketProfit","accounts":[{"id":"19","account_id":"sales@impulsleads.com","username":"sales@impulsleads.com"}]},{"id":"0334","name":"ROIrunner","accounts":[{"id":"420","account_id":"","username":"media@ytz.com"}]},{"id":"0273","name":"Sam Media","accounts":[{"id":"342","account_id":"","username":"NA"}]},{"id":"0236","name":"Say Media Group","accounts":[{"id":"298","account_id":"","username":"NA"}]},{"id":"0315","name":"Scoot Media","accounts":[{"id":"394","account_id":"","username":"media@ytz.com"}]},{"id":"0016","name":"Sebastian Sterling","accounts":[{"id":"23","account_id":"ppxcom","username":"ppxcom"}]},{"id":"0142","name":"Secco Squared","accounts":[{"id":"167","account_id":"149195","username":"media@ytz.com"},{"id":"247","account_id":"182072","username":"mediappx"}]},{"id":"0069","name":"Sendori","accounts":[{"id":"82","account_id":"D2174","username":"alphan@ppx.com"}]},{"id":"0271","name":"ShufflePoint","accounts":[{"id":"340","account_id":"","username":"media@ytz.com"}]},{"id":"0105","name":"SilverPath","accounts":[{"id":"128","account_id":"","username":"108"}]},{"id":"0328","name":"Slimspots","accounts":[{"id":"411","account_id":"","username":"media@ytz.com"}]},{"id":"0249","name":"Society Invite","accounts":[{"id":"315","account_id":"","username":"ytzmedia"}]},{"id":"0202","name":"soicos","accounts":[{"id":"253","account_id":"","username":"max@ytz.com"}]},{"id":"0316","name":"Somoto","accounts":[{"id":"397","account_id":"","username":"max@ytz.com"}]},{"id":"0245","name":"Sprint Media (BaseBone)","accounts":[{"id":"307","account_id":"","username":"temp"}]},{"id":"0024","name":"SprocketsMedia","accounts":[{"id":"30","account_id":"109","username":"jpalmer@ppx.com"}]},{"id":"0242","name":"SSLCenterCPV","accounts":[{"id":"312","account_id":"","username":"DH-CPV"},{"id":"313","account_id":"","username":"BODIS-CPV"},{"id":"314","account_id":"","username":"PCREW-CPV"},{"id":"366","account_id":"","username":"DH-CPV-2"}]},{"id":"0287","name":"Starex Interactive","accounts":[{"id":"359","account_id":"","username":"NA"}]},{"id":"0063","name":"Stats Adjustments","accounts":[{"id":"181","account_id":"","username":"ADVERTISER ADJUSTMENT"}]},{"id":"0200","name":"Sterkly","accounts":[{"id":"251","account_id":"","username":"jaredp@ytzemail.com"}]},{"id":"0162","name":"Sticky Layer","accounts":[{"id":"190","account_id":"30","username":"devin@ppx.com"}]},{"id":"0065","name":"SureHits ","accounts":[{"id":"77","account_id":"jpalmer@ppx.com","username":"jpalmer@ppx.com"}]},{"id":"0218","name":"SYKSYM","accounts":[{"id":"275","account_id":"","username":"SYKSYM"}]},{"id":"0052","name":"T3Leads","accounts":[{"id":"60","account_id":"8291","username":"ppxcom"},{"id":"358","account_id":"","username":"SSLTrack"}]},{"id":"0019","name":"Tatto Media","accounts":[{"id":"26","account_id":"media@ppx.com","username":"media@ppx.com"}]},{"id":"0224","name":"Template CPM","accounts":[{"id":"284","account_id":"","username":"ALL Templates"}]},{"id":"0158","name":"Temporary Statistics","accounts":[{"id":"185","account_id":"","username":"blank"}]},{"id":"0190","name":"The Parking Place","accounts":[{"id":"234","account_id":"","username":"PPX"}]},{"id":"0164","name":"Thumbplay","accounts":[{"id":"192","account_id":"","username":"ytzmanagement"},{"id":"245","account_id":"Marketing","username":"tobi@ppx.com"}]},{"id":"0239","name":"TIMWE EURO","accounts":[{"id":"301","account_id":"","username":"unkown"}]},{"id":"0238","name":"Timwe USD","accounts":[{"id":"300","account_id":"","username":"unkown"}]},{"id":"0318","name":"Track Concepts","accounts":[{"id":"399","account_id":"","username":"NA"}]},{"id":"0319","name":"Traffic Captain","accounts":[{"id":"400","account_id":"","username":"media@ytz.com"}]},{"id":"0163","name":"Transcend Media","accounts":[{"id":"191","account_id":"NA","username":"max@ppx.com"}]},{"id":"0321","name":"Tuguu","accounts":[{"id":"404","account_id":"","username":"ytzTTB@required.com"}]},{"id":"0227","name":"Tyroo","accounts":[{"id":"287","account_id":"CD15144","username":"media@ytz.com"},{"id":"364","account_id":"cd15144","username":"media@ytz.com"},{"id":"428","account_id":"mobiles2s","username":"mobiles2s"}]},{"id":"0042","name":"Uffiliates","accounts":[{"id":"50","account_id":"ppxcom","username":"ppxcom"}]},{"id":"0050","name":"Ultra Health Network","accounts":[{"id":"58","account_id":"CD399","username":"media@ppx.com"}]},{"id":"0088","name":"UniqueLeads","accounts":[{"id":"107","account_id":"201146","username":"media@ppx.com"}]},{"id":"0222","name":"Upsurge","accounts":[{"id":"281","account_id":"","username":"media@ytz.com"}]},{"id":"0255","name":"w2mobile","accounts":[{"id":"323","account_id":"","username":"media@ytz.com"}]},{"id":"0112","name":"Wallamedia","accounts":[{"id":"136","account_id":"600225","username":"ppxmedia"}]},{"id":"0177","name":"Wam Media Group","accounts":[{"id":"210","account_id":"189443","username":"189443"}]},{"id":"0170","name":"Websponsors","accounts":[{"id":"200","account_id":"","username":"ppxcom"}]},{"id":"0229","name":"WilliamHill"},{"id":"0205","name":"Wireless Idea","accounts":[{"id":"257","account_id":"","username":"devin@ytz.com"}]},{"id":"0262","name":"Wolfstorm Media","accounts":[{"id":"330","account_id":"","username":"media@ytz.com"}]},{"id":"0345","name":"Wow Interactive","accounts":[{"id":"434","account_id":"","username":"max@ytz.com"}]},{"id":"0263","name":"Xplosion Media","accounts":[{"id":"332","account_id":"","username":"268303"}]},{"id":"0174","name":"Xprofiles","accounts":[{"id":"206","account_id":"","username":"ppxcom"}]},{"id":"0213","name":"XY7","accounts":[{"id":"268","account_id":"","username":"219089"}]},{"id":"0099","name":"Yellow Hammer","accounts":[{"id":"121","account_id":"","username":"media@ppx.com"}]},{"id":"0076","name":"YEP!"}]}'; $network_list = @file_get_contents('http://' . DOMAIN_CONFIG . '/admin/api/get_advertisers/?api_key=API8088K3Y135&show_accounts=1'); $data = json_decode($network_list); $network_list = (is_null($data) ? $default_list : $network_list); return $network_list; } /** * Get version id for rotations. * * @param string $name * @param int $mobile * @param string $worker * @return string */ function get_version_id($name, $mobile, $worker) { return curl_get_async('http://' . DOMAIN_CONFIG . '/admin/api/create_template/', array( 'api_key' => 'API8088K3Y135', 'output' => 'csv', 'template_name' => $name, 'category' => 10, /* 'type' => 'mini', */ 'mobile' => ($mobile ? 1 : 0), 'turl' => $worker, ), true); } /** * Update template name by version id * * @param string $version_id * @param string $name * @param int $mobile * @param string $worker * @return string */ function update_version_id($version_id, $name, $mobile, $worker) { return curl_get_async('http://' . DOMAIN_CONFIG . '/admin/api/update_template/', array( 'api_key' => 'API8088K3Y135', 'output' => 'csv', 'template_id' => $version_id, 'template_name' => $name, 'category' => 10, /* 'type' => 'mini', */ 'mobile' => ($mobile ? 1 : 0), 'turl' => $worker, ), true); } /** * Get site id for the branchmap * * @param string $subid * @return string */ function get_siteid_id($worker) { return curl_get_async('http://' . DOMAIN_CONFIG . '/admin/api/get_brand_champ_id/', array('api_key' => 'API8088K3Y135', 'url' => $worker, 'output' => 'csv'), true); } /** * Encode sub id via sockets. Time out is 5 seconds * * @param string $subid * @return string */ function get_sub_id_encode($subid) { return curl_get_async('http://' . DOMAIN_SUBID . '/tools/scramble/encode/', array('id' => $subid), true); } /** * Decode sub id via sockets. Time out is 5 seconds * * @param string $subid * @return string */ function get_sub_id_decode($subid) { return -1; //	return curl_get_async('http://' . DOMAIN_SUBID . '/tools/scramble/decode/', array('id' => $subid), true); } /** * Recursive Deleting the folder * * @param string $path * @return boolean */ function rrmdir($path) { return is_file($path) ? @unlink($path) : array_map('rrmdir', glob($path . '/*')) == @rmdir($path); } /** * Recursively Copy folder * * @param string $src * @param string $dst * @return void */ function rcopy($src, $dst) { if (file_exists($dst)) { rrmdir($dst); } if (is_dir($src)) { @mkdir($dst); $files = scandir($src); foreach ($files as $file) { if ($file != "." && $file != "..") { rcopy("{$src}/{$file}", "{$dst}/{$file}"); } } } else if (file_exists($src)) { @copy($src, $dst); } } /** * Generate table name based on worker name. Replace "special characters" with "_" * * @param string $worker * @return string */ function get_tableName($worker = SWARM_WORKER) { $table_name = trim(str_replace(array('.', '-'), '_', $worker), '/'); if(strlen($table_name) > 55) { $table_name = substr($table_name, 0, 55); } return $table_name; } /** * Get SVN information for the footer for the page. * For now it shows current revision (line 5) and latest modification date (line 10) * * @XXX: Need to add ability to make a call using php svn extension * * @return string (html) */ function get_footer_svn_info() { if (!MINI_IS_STAND_ALONE) { @exec('svn info ' . FCPATH . ' 2>/dev/null', $svn_info); if (isset($svn_info[4]) && isset($svn_info[9])) { $rev = end(explode(':', $svn_info[4])); $date = end(explode(':', $svn_info[9], 2)); $date = substr($date, 0, strpos($date, '(')); return "rev: {$rev} @ {$date}"; } } return ''; } /** * Check synchronization status: * - Get last modified dates for db && templates. * - Get last synchronization time for tracking and files. * * @return array */ function check_worker_sync() { $mtime = false; if (MINI_IS_QUEEN) { $mtime = array( 'mini_id' => 0, 'tracking' => '', 'files' => '', 'db' => '', 'templates' => '', 'synced' => true ); // getting data for ALL minis $q = Doctrine_Manager::getInstance()->getCurrentConnection(); $sync = $q->execute("SELECT MIN(mysql_last_sync) AS tracking, MIN(sync_last) AS files FROM swarm_server_ip AS ssi INNER JOIN swarm_mini_server AS sms ON ssi.id = sms.server_ip_id INNER JOIN swarm_mini AS sm ON sms.mini_id=sm.id WHERE ssi.enabled = 1"); $sync = $sync->fetch(PDO::FETCH_ASSOC); // using oldest sync values $mtime['tracking'] = strtotime($sync['tracking']); $mtime['files'] = strtotime($sync['files']); // get lat modified data for db and tempaltes $mtime['db'] = dir_files_mtime(FCPATH . 'data/db/'); $mtime['templates'] = dir_files_mtime(MINI_TEMPLATE_ROOT); // synced or not? $mtime['synced'] = !$mtime['files'] || ( $mtime['files'] > max($mtime['db'], $mtime['templates']) ); //	sycn time	physical files db vs templates } else { $manager = Doctrine_Manager::getInstance(); try { $mtime = array( 'mini_id' => 0, 'tracking' => '', 'files' => '', 'db' => '', 'templates' => '', 'synced' => true ); // get data from db $dsn = 'sqlite:///' . FCPATH . 'data/db/swarm.sqlite'; $conn = Doctrine_Manager::connection($dsn, 'swarm'); Doctrine_Core::createTablesFromArray(array('swarm_server_ip')); $q = Doctrine_Manager::getInstance()->getCurrentConnection(); $sync = $q->execute("SELECT MAX(sm.id) AS mini_id, MIN(mysql_last_sync) AS tracking, MIN(sync_last) AS files FROM swarm_server_ip AS ssi INNER JOIN swarm_mini_server AS sms ON ssi.id = sms.server_ip_id INNER JOIN swarm_mini AS sm ON sms.mini_id=sm.id WHERE sm.domain IN (?,?) AND ssi.enabled='1' ", array(SWARM_WORKER, SWARM_PARENT)); $sync = $sync->fetch(PDO::FETCH_ASSOC); $manager->closeConnection($conn); $manager->setCurrentConnection('default'); $mtime['mini_id'] = $sync['mini_id']; $mtime['tracking'] = strtotime($sync['tracking']); $mtime['files'] = strtotime($sync['files']); // get db last modified date $mtime['db'] = filemtime(FCPATH . 'data/db/' . SWARM_PARENT . '.sqlite'); // get template last modified date $mtime['templates'] = dir_files_mtime(MINI_TEMPLATE); $mtime['synced'] = !$mtime['files'] || $mtime['files'] > max($mtime['db'], $mtime['templates']); } catch (Exception $exc) { if (isset($conn)) $manager->closeConnection($conn); $manager->setCurrentConnection('default'); return false; } } return $mtime; } /** * Scan whole folder and find most recent modification date * * @param string $dir absolute path * @param array $skip the following files / folders * @return mixed(false|int) */ function dir_files_mtime($dir, $skip=array('swarm.sqlite')) { $time = 0; if (FALSE !== ($dh = @opendir($dir))) { while (FALSE !== ($file = readdir($dh))) { if ($file{0} != '.' && !in_array($file, $skip)) { // check modification date of file / folder $_mtime = filemtime($dir . $file); if ($_mtime && ($time < $_mtime)) { $time = $_mtime; } // if file is the folder, check its inner parts if (is_dir($dir . $file)) { $_mtime = dir_files_mtime($dir . $file . '/', $skip); if ($_mtime && ($time < $_mtime)) { $time = $_mtime; } } } } @closedir($dh); } return $time; } /** * get supported languages for js * @return array */ function get_js_supported_languages() { $list = array(); $dir = MINI_TEMPLATE_ROOT . '_common/js/date/'; $files = glob(MINI_TEMPLATE_ROOT . '_common/js/date/returnDate.*.js'); foreach ($files as $file) { $code = str_replace(array(MINI_TEMPLATE_ROOT . '_common/js/date/returnDate.', '.js'), '', $file); $list[$code] = $code; } return $list; } /** * Generates a short url that must contain letters and numbers and must be the size of numAlpha * * Can be used to create MiniURLs or JumplinkIDs * * @param integer $numAlpha * @return string */ function generate_numAlpha($numAlpha = 6) { $listAlpha = 'aAbBcCdDeEfFgGhHiIjJkKlLmMnNoOpPqQrRsStTuUvVwWxXyYzZ0123456789'; do{ $short_url = str_shuffle(substr(str_shuffle($listAlpha),0,$numAlpha)); }while(!preg_match("/^.*(?=.{$numAlpha})(?=.*\d)(?=.*[a-zA-Z]).*$/",trim($short_url))); return $short_url; } /** * Get Mime Type using Apache mime.types * * Needs Proper Testing... * */ function get_mime_type($filename, $mimePath = 'data') { $fileext = substr(strrchr($filename, '.'), 1); if (empty($fileext)) return (false); $regex = "/^([\w\+\-\.\/]+)\s+(\w+\s)*($fileext\s)/i"; $lines = file("$mimePath/mime.types"); foreach($lines as $line) { if (substr($line, 0, 1) == '#') continue; // skip comments $line = rtrim($line) . " "; if (!preg_match($regex, $line, $matches)) continue; // no match to the extension return ($matches[1]); } return (false); // no match at all } /** * Get the domain even if they have suffix */ function get_domain($url) { $fix = array('xyz','com', 'edu', 'gov', 'int', 'mil', 'net', 'org', 'biz', 'info', 'pro', 'name', 'museum', 'coop', 'aero', 'idv', 'al', 'dz', 'af', 'ar', 'ae', 'aw', 'om', 'az', 'eg', 'et', 'ie', 'ee', 'ad', 'ao', 'ai', 'ag', 'at', 'au', 'mo', 'bb', 'pg', 'bs', 'pk', 'py', 'ps', 'bh', 'pa', 'br', 'by', 'bm', 'bg', 'mp', 'bj', 'be', 'is', 'pr', 'ba', 'pl', 'bo', 'bz', 'bw', 'bt', 'bf', 'bi', 'bv', 'kp', 'gq', 'dk', 'de', 'tl', 'tp', 'tg', 'dm', 'do', 'ru', 'ec', 'er', 'fr', 'fo', 'pf', 'gf', 'tf', 'va', 'ph', 'fj', 'fi', 'cv', 'fk', 'gm', 'cg', 'cd', 'co', 'cr', 'gg', 'gd', 'gl', 'ge', 'cu', 'gp', 'gu', 'gy', 'kz', 'ht', 'kr', 'nl', 'an', 'hm', 'hn', 'ki', 'dj', 'kg', 'gn', 'gw', 'ca', 'gh', 'ga', 'kh', 'cz', 'zw', 'cm', 'qa', 'ky', 'km', 'ci', 'kw', 'cc', 'hr', 'ke', 'ck', 'lv', 'ls', 'la', 'lb', 'lt', 'lr', 'ly', 'li', 're', 'lu', 'rw', 'ro', 'mg', 'im', 'mv', 'mt', 'mw', 'my', 'ml', 'mk', 'mh', 'mq', 'yt', 'mu', 'mr', 'us', 'um', 'as', 'vi', 'mn', 'ms', 'bd', 'pe', 'fm', 'mm', 'md', 'ma', 'mc', 'mz', 'mx', 'nr', 'np', 'ni', 'ne', 'ng', 'nu', 'no', 'nf', 'na', 'za', 'aq', 'gs', 'eu', 'pw', 'pn', 'pt', 'jp', 'se', 'ch', 'sv', 'ws', 'yu', 'sl', 'sn', 'cy', 'sc', 'sa', 'cx', 'st', 'sh', 'kn', 'lc', 'sm', 'pm', 'vc', 'lk', 'sk', 'si', 'sj', 'sz', 'sd', 'sr', 'sb', 'so', 'tj', 'tw', 'th', 'tz', 'to', 'tc', 'tt', 'tn', 'tv', 'tr', 'tm', 'tk', 'wf', 'vu', 'gt', 've', 'bn', 'ug', 'ua', 'uy', 'uz', 'es', 'eh', 'gr', 'hk', 'sg', 'nc', 'nz', 'hu', 'sy', 'jm', 'am', 'ac', 'ye', 'iq', 'ir', 'il', 'it', 'in', 'id', 'uk', 'vg', 'io', 'jo', 'vn', 'zm', 'je', 'td', 'gi', 'cl', 'cf', 'cn', 'ac', 'ad', 'ae', 'af', 'ag', 'ai', 'al', 'am', 'an', 'ao', 'aq', 'ar', 'as', 'at', 'au', 'aw', 'az', 'ba', 'bb', 'bd', 'be', 'bf', 'bg', 'bh', 'bi', 'bj', 'bm', 'bn', 'bo', 'br', 'bs', 'bt', 'bv', 'bw', 'by', 'bz', 'ca', 'cc', 'cd', 'cf', 'cg', 'ch', 'ci', 'ck', 'cl', 'cm', 'cn', 'co', 'cr', 'cu', 'cv', 'cx', 'cy', 'cz', 'de', 'dj', 'dk', 'dm', 'do', 'dz', 'ec', 'ee', 'eg', 'eh', 'er', 'es', 'et', 'eu', 'fi', 'fj', 'fk', 'fm', 'fo', 'fr', 'ga', 'gd', 'ge', 'gf', 'gg', 'gh', 'gi', 'gl', 'gm', 'gn', 'gp', 'gq', 'gr', 'gs', 'gt', 'gu', 'gw', 'gy', 'hk', 'hm', 'hn', 'hr', 'ht', 'hu', 'id', 'ie', 'il', 'im', 'in', 'io', 'iq', 'ir', 'is', 'it', 'je', 'jm', 'jo', 'jp', 'ke', 'kg', 'kh', 'ki', 'km', 'kn', 'kp', 'kr', 'kw', 'ky', 'kz', 'la', 'lb', 'lc', 'li', 'lk', 'lr', 'ls', 'lt', 'lu', 'lv', 'ly', 'ma', 'mc', 'md', 'mg', 'mh', 'mk', 'ml', 'mm', 'mn', 'mo', 'mp', 'mq', 'mr', 'ms', 'mt', 'mu', 'mv', 'mw', 'mx', 'my', 'mz', 'na', 'nc', 'ne', 'nf', 'ng', 'ni', 'nl', 'no', 'np', 'nr', 'nu', 'nz', 'om', 'pa', 'pe', 'pf', 'pg', 'ph', 'pk', 'pl', 'pm', 'pn', 'pr', 'ps', 'pt', 'pw', 'py', 'qa', 're', 'ro', 'ru', 'rw', 'sa', 'sb', 'sc', 'sd', 'se', 'sg', 'sh', 'si', 'sj', 'sk', 'sl', 'sm', 'sn', 'so', 'sr', 'st', 'sv', 'sy', 'sz', 'tc', 'td', 'tf', 'tg', 'th', 'tj', 'tk', 'tl', 'tm', 'tn', 'to', 'tp', 'tr', 'tt', 'tv', 'tw', 'tz', 'ua', 'ug', 'uk', 'um', 'us', 'uy', 'uz', 'va', 'vc', 've', 'vg', 'vi', 'vn', 'vu', 'wf', 'ws', 'ye', 'yt', 'yu', 'yr', 'za', 'zm', 'zw'); #$host = parse_url($url,PHP_URL_HOST); # Next line I am overwriting what is in the varible, meaning I don't need this line. $host = $url; $list = explode('.',$host); $res = array(); $i = count($list) - 1; while($i >= 0){ if(!in_array($list[$i],$fix)){ $res[] = $list[$i]; break; } $res[] = $list[$i]; $i--; } return implode('.',array_reverse($res)); } /** * Check for HHVM Environment */ function is_hhvm() { return defined('HHVM_VERSION'); } function print_rf($args) { echo '
'.print_r($args, true).'
'; }

